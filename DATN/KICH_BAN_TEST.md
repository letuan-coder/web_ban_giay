# Kịch Bản Kiểm Thử (Test Cases) - Phiên bản mở rộng

Dưới đây là các kịch bản kiểm thử chi tiết cho các chức năng của website bán giày dép, bao gồm các trường hợp chính, phụ và biên.

| **Chức năng** | **ID** | **Kịch bản Test** | **Dữ liệu đầu vào** | **Các bước thực hiện** | **Kết quả mong đợi** | **Loại Test** |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **1. Quản lý Tài khoản** | **TC_AUTH_01** | Đăng ký tài khoản thành công | Dữ liệu hợp lệ: Tên, email chưa tồn tại, mật khẩu mạnh. | 1. Vào trang Đăng ký. 2. Điền đầy đủ thông tin hợp lệ. 3. Nhấn nút "Đăng ký". | Hệ thống tạo tài khoản mới, gửi email xác nhận, chuyển hướng đến trang đăng nhập. | Positive |
| | **TC_AUTH_02** | Đăng ký với email đã tồn tại | Email đã được sử dụng. | 1. Vào trang Đăng ký. 2. Điền thông tin với email đã tồn tại. | Hiển thị thông báo lỗi "Email đã tồn tại". | Negative |
| | **TC_AUTH_03** | Đăng ký với mật khẩu yếu | Mật khẩu: "123" (không đủ độ dài và độ phức tạp). | 1. Vào trang Đăng ký. 2. Điền thông tin, nhập mật khẩu yếu. | Hiển thị thông báo lỗi về yêu cầu mật khẩu (ví dụ: "Mật khẩu phải dài ít nhất 8 ký tự..."). | Negative |
| | **TC_AUTH_04** | Đăng ký với email không hợp lệ | Email: "test.com" | 1. Vào trang Đăng ký. 2. Điền email không hợp lệ. | Hiển thị thông báo lỗi "Định dạng email không hợp lệ". | Negative |
| | **TC_AUTH_05** | Đăng nhập thành công | Email và mật khẩu đúng. | 1. Vào trang Đăng nhập. 2. Nhập email và mật khẩu chính xác. | Đăng nhập thành công, tạo JWT, chuyển hướng người dùng về trang chủ. | Positive |
| | **TC_AUTH_06** | Đăng nhập thất bại (sai mật khẩu) | Email đúng, mật khẩu sai. | 1. Vào trang Đăng nhập. 2. Nhập email đúng và mật khẩu sai. | Hiển thị thông báo lỗi "Thông tin đăng nhập không chính xác". | Negative |
| | **TC_AUTH_07** | Đăng nhập bằng Google | Tài khoản Google hợp lệ. | 1. Vào trang Đăng nhập. 2. Click "Đăng nhập bằng Google". 3. Xác thực tài khoản Google. | Đăng nhập thành công, tạo tài khoản mới nếu chưa có, chuyển hướng vào trang chủ. | Positive |
| | **TC_AUTH_08** | Quên mật khẩu | Email đã đăng ký trong hệ thống. | 1. Vào trang "Quên mật khẩu". 2. Nhập email đã đăng ký. 3. Nhấn "Gửi". | Hệ thống gửi email chứa link đặt lại mật khẩu đến địa chỉ email đó. | Positive |
| | **TC_AUTH_09** | Đặt lại mật khẩu với token hợp lệ | Token còn hạn được gửi trong email. | 1. Click vào link trong email. 2. Nhập mật khẩu mới và xác nhận. | Mật khẩu được cập nhật thành công, người dùng có thể đăng nhập bằng mật khẩu mới. | Positive |
| | **TC_AUTH_10** | Đặt lại mật khẩu với token hết hạn | Token đã hết hạn. | 1. Click vào link trong email. 2. Nhập mật khẩu mới. | Hiển thị thông báo "Link đặt lại mật khẩu đã hết hạn hoặc không hợp lệ". | Negative |
| | **TC_AUTH_11** | Cập nhật thông tin cá nhân | Tên, số điện thoại mới. | 1. Đăng nhập. 2. Vào trang "Thông tin cá nhân". 3. Chỉnh sửa thông tin và lưu. | Thông tin người dùng được cập nhật thành công. | Positive |
| | **TC_AUTH_12** | Xem lịch sử đơn hàng | Người dùng có ít nhất 1 đơn hàng. | 1. Đăng nhập. 2. Vào "Lịch sử đơn hàng". | Hiển thị danh sách các đơn hàng đã đặt. | Positive |
| | **TC_AUTH_13** | Thêm sản phẩm vào Yêu thích | Người dùng đã đăng nhập. | 1. Đăng nhập. 2. Tại trang chi tiết sản phẩm, click icon "Yêu thích". | Sản phẩm được thêm vào danh sách yêu thích của người dùng. | Positive |
| | **TC_AUTH_14** | Truy cập trang admin với quyền USER | Tài khoản có quyền USER. | 1. Đăng nhập bằng tài khoản USER. 2. Cố gắng truy cập URL `/admin`. | Từ chối truy cập, báo lỗi 403 hoặc chuyển hướng về trang chủ. | Negative |
| | **TC_AUTH_15**| Truy cập chức năng quản lý user với quyền STAFF | Tài khoản có quyền STAFF. | 1. Đăng nhập bằng tài khoản STAFF. 2. Cố gắng truy cập URL `/admin/users`. | Từ chối truy cập, báo lỗi 403. | Negative |
| **2. Quản lý Sản phẩm** | **TC_PROD_01** | Xem danh sách sản phẩm (Guest) | Không cần | 1. Truy cập trang sản phẩm. | Hiển thị danh sách sản phẩm với hình ảnh, tên, giá. | Positive |
| | **TC_PROD_02** | Tìm kiếm sản phẩm theo tên | Tên sản phẩm: "Giày ABC" | 1. Nhập "Giày ABC" vào ô tìm kiếm. | Hiển thị các sản phẩm có tên chứa "Giày ABC". | Positive |
| | **TC_PROD_03** | Tìm kiếm sản phẩm không tồn tại | Tên sản phẩm: "XYZ123" | 1. Nhập "XYZ123" vào ô tìm kiếm. | Hiển thị thông báo "Không tìm thấy sản phẩm nào". | Positive |
| | **TC_PROD_04** | Tìm kiếm sản phẩm theo mã (SKU) | Mã sản phẩm: "NIKE-AF1-WHT-38" | 1. Nhập SKU vào ô tìm kiếm. | Hiển thị chính xác sản phẩm tương ứng. | Positive |
| | **TC_PROD_05** | Lọc sản phẩm theo nhiều tiêu chí | Danh mục: "Giày thể thao", Giá: "500k-1M", Màu: "Trắng" | 1. Chọn các bộ lọc tương ứng. | Hiển thị các sản phẩm thỏa mãn tất cả các điều kiện lọc. | Positive |
| | **TC_PROD_06** | Xem chi tiết sản phẩm | Click vào một sản phẩm. | 1. Click vào sản phẩm từ danh sách. | Hiển thị đầy đủ thông tin: ảnh, mô tả, các tùy chọn màu/size, tồn kho. | Positive |
| | **TC_PROD_07** | Xem sản phẩm với một số biến thể hết hàng | Sản phẩm A, size 38 còn hàng, size 39 hết hàng. | 1. Vào trang chi tiết sản phẩm A. | Tùy chọn size 39 bị làm mờ hoặc không thể chọn, có ghi chú "Hết hàng". | Positive |
| | **TC_PROD_08 (ADMIN)**| Nhập sản phẩm từ file CSV | File CSV hợp lệ. | 1. Đăng nhập Admin. 2. Vào "Quản lý sản phẩm" -> "Import". 3. Tải file lên. | Hệ thống tạo mới các sản phẩm và biến thể tương ứng, báo cáo kết quả. | Positive |
| | **TC_PROD_09 (ADMIN)**| Nhập sản phẩm từ file CSV lỗi | File CSV thiếu cột, sai định dạng dữ liệu. | 1. Thực hiện như TC_PROD_08 với file lỗi. | Hệ thống báo lỗi, chỉ ra dòng và lý do lỗi, không import dữ liệu. | Negative |
| | **TC_PROD_10 (STAFF)**| Cập nhật tồn kho tại chi nhánh | Tài khoản STAFF của chi nhánh A. Tăng tồn kho sản phẩm X lên 5. | 1. Đăng nhập Staff (chi nhánh A). 2. Vào quản lý kho. 3. Cập nhật số lượng sản phẩm X. | Tồn kho sản phẩm X tại chi nhánh A tăng 5. Tồn kho ở chi nhánh khác không đổi. | Positive |
| **3. Giỏ hàng & Đặt hàng**| **TC_CART_01** | Thêm sản phẩm vào giỏ hàng (chưa đăng nhập) | Chọn sản phẩm, size, màu. | 1. Chọn sản phẩm. 2. Nhấn "Thêm vào giỏ". | Yêu cầu người dùng đăng nhập/đăng ký. | Negative |
| | **TC_CART_02** | Thêm sản phẩm vào giỏ hàng (đã đăng nhập) | Chọn sản phẩm, size, màu, số lượng = 1. | 1. Đăng nhập. 2. Chọn sản phẩm. 3. Nhấn "Thêm vào giỏ". | Sản phẩm được thêm vào giỏ hàng thành công. | Positive |
| | **TC_CART_03** | Thêm sản phẩm vào giỏ hàng vượt tồn kho | Tồn kho sản phẩm A là 5. Thêm 6 sản phẩm A vào giỏ. | 1. Thêm 5 sp A. 2. Vào giỏ hàng, tăng số lượng lên 6. | Hiển thị lỗi "Số lượng vượt quá tồn kho", không cho phép tăng. | Negative |
| | **TC_CART_04** | Cập nhật số lượng trong giỏ hàng | Sản phẩm B, số lượng từ 2 lên 3. | 1. Vào giỏ hàng. 2. Thay đổi số lượng sản phẩm B. | Số lượng cập nhật, tổng tiền của giỏ hàng được tính lại. | Positive |
| | **TC_CART_05** | Xóa sản phẩm khỏi giỏ hàng | Sản phẩm C trong giỏ. | 1. Vào giỏ hàng. 2. Nhấn nút xóa sản phẩm C. | Sản phẩm C bị xóa khỏi giỏ hàng, tổng tiền được tính lại. | Positive |
| | **TC_ORDER_01** | Đặt hàng với số lượng < 10 (thanh toán khi nhận hàng) | Giỏ hàng có 5 sản phẩm. | 1. Tiến hành thanh toán. 2. Chọn phương thức "Thanh toán khi nhận hàng". | Tạo đơn hàng thành công, trạng thái "Chờ xác nhận", không yêu cầu cọc. | Positive |
| | **TC_ORDER_02** | Đặt hàng với số lượng >= 10 (yêu cầu cọc) | Giỏ hàng có 12 sản phẩm. | 1. Tiến hành thanh toán. | Hệ thống hiển thị yêu cầu cọc 50% và số tiền cần cọc. Không có tùy chọn "Thanh toán khi nhận hàng". | Edge Case |
| | **TC_ORDER_03** | Đặt hàng với sản phẩm vừa hết hàng | Sản phẩm A trong giỏ vừa hết hàng do người khác mua. | 1. Tiến hành thanh toán. | Báo lỗi "Sản phẩm [Tên SP] đã hết hàng...", yêu cầu xóa khỏi giỏ để tiếp tục. | Negative |
| | **TC_ORDER_04** | Áp dụng mã giảm giá hợp lệ | Mã "SALE50" còn hạn. | 1. Tại trang thanh toán, nhập mã "SALE50". | Tổng tiền đơn hàng được giảm theo giá trị của mã. | Positive |
| | **TC_ORDER_05** | Áp dụng mã giảm giá hết hạn/không hợp lệ | Mã "OLDCODE". | 1. Nhập mã "OLDCODE". | Hiển thị lỗi "Mã giảm giá không hợp lệ hoặc đã hết hạn". | Negative |
| | **TC_ORDER_06 (USER)**| Hủy đơn hàng | Đơn hàng đang ở trạng thái "Chờ xác nhận". | 1. Vào lịch sử đơn hàng. 2. Chọn đơn hàng và nhấn "Hủy". | Đơn hàng được cập nhật trạng thái thành "Đã hủy". | Positive |
| | **TC_ORDER_07 (STAFF)**| Xác nhận đơn hàng của khách | Đơn hàng mới, trạng thái "Chờ xác nhận". | 1. Đăng nhập Staff. 2. Vào quản lý đơn hàng, tìm đơn hàng mới. 3. Nhấn "Xác nhận". | Trạng thái đơn hàng chuyển thành "Đang xử lý". Tồn kho sản phẩm tương ứng bị trừ. | Positive |
| **4. Thanh toán (VNPAY)** | **TC_PAY_01** | Thanh toán toàn bộ qua VNPAY thành công | Đơn hàng < 10 sản phẩm. | 1. Chọn thanh toán VNPAY. 2. Hoàn tất giao dịch trên cổng VNPAY. 3. VNPAY trả về. | Chuyển hướng đến cổng VNPAY. Sau khi thành công, trạng thái đơn hàng cập nhật là "Đã thanh toán". | Positive |
| | **TC_PAY_02** | Thanh toán cọc qua VNPAY thành công | Đơn hàng >= 10 sản phẩm. | 1. Chọn thanh toán VNPAY. 2. Hoàn tất giao dịch. | Chuyển hướng đến cổng VNPAY với số tiền cọc. Sau khi thành công, trạng thái đơn hàng là "Đã cọc". | Positive |
| | **TC_PAY_03** | Giao dịch VNPAY thất bại (người dùng hủy) | Người dùng hủy giao dịch trên cổng VNPAY. | 1. Chọn thanh toán VNPAY. 2. Tại cổng VNPAY, nhấn nút hủy. | Trở về website, trạng thái đơn hàng vẫn là "Chờ thanh toán". | Negative |
| | **TC_PAY_04** | Xử lý IPN từ VNPAY thành công | VNPAY gửi request IPN báo giao dịch thành công. | (Backend) 1. Nhận và xác thực chữ ký VNPAY. 2. Cập nhật trạng thái đơn hàng. | Trả về mã thành công cho VNPAY. Đơn hàng được cập nhật đúng. | Positive |
| **5. Tích hợp Giao hàng** | **TC_SHIP_01** | Lấy phí ship từ GHTK | Người dùng nhập địa chỉ hợp lệ. | 1. Tại trang thanh toán, nhập địa chỉ. | Hệ thống hiển thị phí ship dự kiến từ GHTK. | Positive |
| | **TC_SHIP_02** | Lấy phí ship với địa chỉ không được hỗ trợ | Địa chỉ mà GHTK không giao tới. | 1. Nhập địa chỉ không được hỗ trợ. | Hiển thị thông báo "Xin lỗi, chúng tôi chưa thể giao hàng đến địa chỉ này". | Negative |
| | **TC_SHIP_03 (STAFF)**| Tạo đơn hàng vận chuyển GHTK | Đơn hàng đã được xác nhận. | 1. Staff vào chi tiết đơn hàng. 2. Nhấn "Tạo đơn vận chuyển". | Hệ thống gọi API GHTK, tạo đơn vận chuyển và lưu lại mã vận đơn. | Positive |
| | **TC_SHIP_04** | Tra cứu trạng thái đơn hàng từ GHTK | Đơn hàng đã có mã vận đơn. | 1. Vào chi tiết đơn hàng. 2. Click "Kiểm tra hành trình". | Hiển thị trạng thái mới nhất của đơn hàng từ GHTK. | Positive |
| **6. Gửi Email**| **TC_EMAIL_01** | Gửi email thông báo sản phẩm mới | Admin thêm sản phẩm mới. | 1. Admin tạo và đăng sản phẩm mới. | Hệ thống gửi email đến các người dùng đã đăng ký nhận tin. | Positive |
| **7. Khuyến mãi**| **TC_PROMO_01**| Áp dụng khuyến mãi theo khung giờ | KM 20% (9h-12h). Mua lúc 10h. | 1. Thêm sản phẩm vào giỏ hàng lúc 10h. | Giá sản phẩm được giảm 20%. | Positive |
| | **TC_PROMO_02**| Không áp dụng KM ngoài khung giờ | KM 20% (9h-12h). Mua lúc 13h. | 1. Thêm sản phẩm vào giỏ hàng lúc 13h. | Giá sản phẩm là giá gốc, không giảm. | Negative |
| **8. Banner**| **TC_BANNER_01**| Hiển thị banner đang hoạt động | Banner A có thời gian hoạt động trong ngày hiện tại. | 1. Truy cập trang chủ. | Banner A được hiển thị đúng vị trí. | Positive |
| | **TC_BANNER_02**| Ẩn banner đã hết hạn | Banner B đã hết hạn. | 1. Truy cập trang chủ. | Banner B không được hiển thị. | Negative |
| | **TC_BANNER_03**| Click vào banner đang hoạt động | Banner A được gán link đến trang "/khuyen-mai". | 1. Click vào banner A. | Chuyển hướng người dùng đến trang "/khuyen-mai". | Positive |
| **9. Đánh giá sản phẩm** | **TC_REVIEW_01**| Thêm đánh giá cho sản phẩm đã mua | User đã mua và nhận thành công sản phẩm A. | 1. Vào trang chi tiết sản phẩm A. 2. Viết và gửi đánh giá. | Đánh giá được ghi nhận và hiển thị. | Positive |
| | **TC_REVIEW_02**| Thêm đánh giá cho sản phẩm chưa mua | User chưa từng mua sản phẩm B. | 1. Vào trang chi tiết sản phẩm B. | Không hiển thị form viết đánh giá, hoặc báo lỗi khi cố gửi. | Negative |
| | **TC_REVIEW_03(ADMIN)**| Ẩn một đánh giá không phù hợp | Một đánh giá chứa từ ngữ spam. | 1. Đăng nhập Admin. 2. Vào quản lý đánh giá. 3. Chọn đánh giá và nhấn "Ẩn". | Đánh giá đó không còn hiển thị trên trang sản phẩm. | Positive |
